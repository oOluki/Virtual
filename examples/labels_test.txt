%label SUCCESS "LABELS TEST WAS SUCCESSFULL"

%enum ;; output

    INVALID = -1,

    STDOUT = 0

    STDERR = 1

    OUTPUT_COUNT,

%endenum

%labelv X

%label FAIL "[ERROR] TEST FAILED"

dummy:

%unlabel X      ;; testing the label addition and deletion

%iflabel X      ;; testing the if macros

%label HELLO $FAIL
%label OUTPUT $STDERR

%endif

%ifnlabel X

%label HELLO $SUCCESS
%label OUTPUT $STDOUT

%endif

%unlabel dummy

say_hello:
    STATIC $HELLO
    POP RB
    MOVV RE 1
    MOVV RD $OUTPUT
    
    say_hello_loop:
        READ8    RC RB R0
        DUMPCHAR RC RD R0
        ADD      RB RE RB
    JMPF RC @say_hello_loop

    MOVV RC 10
    DUMPCHAR RC RD R0
    RET

%unlabel say_hello_loop

%start
    CALL @say_hello
    HALT $OUTPUT
